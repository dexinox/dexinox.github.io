<html>
  <head>
    <title>Hell</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link
      href="https://fonts.googleapis.com/css?family=Work+Sans:300,400&display=swap"
      rel="stylesheet"
    />

  </head>
  <body>
    <article class="markdown-body">
      <h1>Hell</h1>
      <p>
        Hell is empty and all the devils are here. 
      </p>
      <iframe src="embed.html" class="embed"></iframe>
      <a class="view-source" style="display: none" href="">
        <img
          src="https://cdn.glitch.com/2bdfb3f8-05ef-4035-a06e-2043962a3a13%2Fview-source%402x.png?1513093958802"
          alt="view source"
          height="33"
        />
      </a>
    </article>
    <script>
      const host = document.location.hostname;
      const projectName = host.toLowerCase().replace(/\.glitch\.me$/, "");
      const link = document.querySelector(".view-source");
      if (link && host.includes(".glitch.me")) {
        link.setAttribute(
          "href",
          `https://glitch.com/edit/#!/${projectName}?path=sketch.js`
        );
        link.style.display = "";
      }

      const embeds = [...document.querySelectorAll(".embed")];
      const aspect = 4 / 3;
      const padding = 0;
      const maxFrameWidth = Infinity;

      function resize() {
        const maxFrameHeight = window.innerHeight * 0.5;
        embeds.forEach(embed => {
          const parentElement = embed.parentElement;
          if (!parentElement) return;
          const rect = parentElement.getBoundingClientRect();

          const parentWidth = rect.width;
          const parentHeight = rect.height;

          const windowAspect = parentWidth / parentHeight;
          const scaleToFitPadding = 0;
          const maxWidth = Math.min(
            maxFrameWidth,
            Math.round(parentWidth - padding * 2)
          );
          let width;
          let height;
          width = maxWidth;
          height = Math.round(width / aspect);
          embed.width = width;
          embed.height = height;
          embed.style.width = `${width}px`;
          embed.style.height = `${height}px`;
        });
      }
      resize();
      window.addEventListener("resize", resize);
    </script>
  </body>
</html>
